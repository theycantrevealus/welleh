/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x33db=['_detachListeners','getAnnotationView','_attachListeners','keyCode','set:container','requires','_detachFromContainer','_hideBalloon','listenTo','_showBalloon','change:selectedViews','isDirty','isVisible','get','number','from','type','narrowsidebar-detach-not-attached','addView','Sidebar','isAttached','NarrowSidebar','using','off','target','Esc','_updateBalloonPosition','customView','detachFromDom','southArrowNorthWest','_manuallyClosed','element','balloonPanelView','locale','activeView','keydown','set','preventDefault','first','items','delete','getSidebarItemView','contains','focus','clear','northArrowSouth','context','narrowsidebar-attach-already-attached','detach','unpin','length','defaultPositions','pin','stopListening','bind','_attachToContainer','high','content','add','narrowSidebar','change:activeView','register','execute','northArrowSouthEast','isAnimationDisabled','refresh','view','change:height','plugins','stopPropagation','bodyCollection','_annotationViewToNarrowView','attach','has','northArrowSouthWest','ck-sidebar--narrow','list','bindTo','destroy','_domEmitter'];(function(_0x57e3a8,_0x33dbba){const _0x2bfafd=function(_0x5c442a){while(--_0x5c442a){_0x57e3a8['push'](_0x57e3a8['shift']());}};_0x2bfafd(++_0x33dbba);}(_0x33db,0x1d5));const _0x2bfa=function(_0x57e3a8,_0x33dbba){_0x57e3a8=_0x57e3a8-0x0;let _0x2bfafd=_0x33db[_0x57e3a8];return _0x2bfafd;};import _0x3f3104 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x59db24 from'./annotations';import _0x58b4ec from'./sidebar';import _0x1df3c4 from'./view/annotationcounterbuttonview';import _0x736668 from'@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';import _0xc6810f from'@ckeditor/ckeditor5-ui/src/editorui/bodycollection';import _0x10908b from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import _0x14378a from'@ckeditor/ckeditor5-utils/src/dom/emittermixin';import{keyCodes as _0x57b1e4}from'@ckeditor/ckeditor5-utils/src/keyboard';import'../../theme/sidebar-narrow.css';export default class s extends _0x3f3104{static get[_0x2bfa('0x10')](){return[_0x58b4ec,_0x59db24];}static get['pluginName'](){return _0x2bfa('0x20');}constructor(_0x264fff){super(_0x264fff),this[_0x2bfa('0x1f')]=!0x1,this[_0x2bfa('0x29')]=new Set(),this[_0x2bfa('0xa')]=Object['create'](_0x14378a),this[_0x2bfa('0x2')]=new Map();}['init'](){this[_0x2bfa('0x39')]['plugins']['get']('Annotations')[_0x2bfa('0x48')](_0x2bfa('0x46'),this),this['bodyCollection']=new _0xc6810f(this[_0x2bfa('0x39')]['locale']),this['bodyCollection']['attachToDom'](),this[_0x2bfa('0x2b')]=new _0x736668(this['context']['locale']),this[_0x2bfa('0x1')][_0x2bfa('0x45')](this[_0x2bfa('0x2b')]);}[_0x2bfa('0x3')](){const _0x2c858c=this['context'][_0x2bfa('0x4f')][_0x2bfa('0x18')](_0x2bfa('0x1e')),_0x5ebf96=this['context']['plugins']['get']('Annotations'),_0x2f7b06=this[_0x2bfa('0x2b')];if(this[_0x2bfa('0x1f')])throw new _0x10908b(_0x2bfa('0x3a'),this);this[_0x2bfa('0x1f')]=!0x0,this[_0x2bfa('0x13')](_0x2c858c,_0x2bfa('0xf'),()=>{this['detach'](),this[_0x2bfa('0x13')](_0x2c858c,'change:container',_0x3c85da=>{_0x3c85da[_0x2bfa('0x22')](),this['attach']();});}),_0x2c858c[_0x2bfa('0x42')]({'viewClass':_0x2bfa('0x6'),'spaceBetweenItems':0x5}),_0x2c858c[_0x2bfa('0x4d')][_0x2bfa('0x7')][_0x2bfa('0x8')](_0x5ebf96[_0x2bfa('0x32')])[_0x2bfa('0x21')](_0x1dbeb2=>{const _0x450fd6=new _0x1df3c4(this[_0x2bfa('0x39')][_0x2bfa('0x2c')]),_0x3befa7=_0x2c858c[_0x2bfa('0x1d')](_0x1dbeb2,_0x450fd6);return this[_0x2bfa('0x2')][_0x2bfa('0x2f')](_0x1dbeb2,_0x450fd6),_0x450fd6[_0x2bfa('0x41')](_0x2bfa('0x16'),'annotationType',_0x2bfa('0x19'))['to'](_0x1dbeb2,_0x2bfa('0x16'),_0x2bfa('0x1b'),_0x2bfa('0x3d')),_0x450fd6['on'](_0x2bfa('0x49'),()=>{this[_0x2bfa('0x29')][_0x2bfa('0x37')](),_0x2f7b06[_0x2bfa('0x44')]['first']!==_0x1dbeb2?(this[_0x2bfa('0x14')](_0x1dbeb2),_0x1dbeb2[_0x2bfa('0x2a')][_0x2bfa('0x36')](),_0x5ebf96[_0x2bfa('0x2d')]=_0x1dbeb2[_0x2bfa('0x26')]):this['_hideBalloon']();}),_0x3befa7;}),this[_0x2bfa('0x13')](_0x5ebf96['items'],'remove',(_0x56538c,_0x4a5c82)=>{this[_0x2bfa('0x2')]['get'](_0x4a5c82)[_0x2bfa('0x9')](),this[_0x2bfa('0x2')][_0x2bfa('0x33')](_0x4a5c82);}),this[_0x2bfa('0x13')](_0x5ebf96,'change:activeView',(_0x155329,_0x2792e0,_0x147b1d,_0x2b27b3)=>{if(_0x2b27b3){const _0x116296=_0x5ebf96[_0x2bfa('0xc')](_0x2b27b3);if(!_0x116296)return;_0x2c858c[_0x2bfa('0x34')](_0x116296)[_0x2bfa('0x4b')]=!0x1;}if(_0x147b1d){const _0x5baff6=_0x5ebf96['getAnnotationView'](_0x147b1d);_0x2c858c[_0x2bfa('0x34')](_0x5baff6)[_0x2bfa('0x4b')]=!0x0;}},{'priority':_0x2bfa('0x43')}),this[_0x2bfa('0x13')](_0x5ebf96,_0x2bfa('0x47'),(_0x5cd066,_0x5d0e6a,_0x12613e)=>{const _0x35064e=_0x5ebf96[_0x2bfa('0xc')](_0x12613e),_0x532dcf=_0x2c858c[_0x2bfa('0x34')](_0x35064e);_0x12613e&&_0x532dcf?this[_0x2bfa('0x14')](_0x35064e):this[_0x2bfa('0x12')]();}),this[_0x2bfa('0x13')](_0x5ebf96,_0x2bfa('0x15'),(_0x2176ce,_0x38ee59,_0x3ffefa,_0x2c728a)=>{for(const _0x48e6ad of _0x2c728a)_0x3ffefa['includes'](_0x48e6ad)||this[_0x2bfa('0x29')][_0x2bfa('0x33')](_0x5ebf96[_0x2bfa('0xc')](_0x48e6ad));}),this['listenTo'](_0x5ebf96,_0x2bfa('0x4c'),()=>{_0x2f7b06[_0x2bfa('0x17')]&&this[_0x2bfa('0x25')]();}),this[_0x2bfa('0xa')][_0x2bfa('0x13')](document,_0x2bfa('0x2e'),(_0x49e836,_0x3a047c)=>{_0x3a047c[_0x2bfa('0xe')]===_0x57b1e4['esc']&&_0x2f7b06[_0x2bfa('0x17')]&&(this[_0x2bfa('0x29')][_0x2bfa('0x45')](_0x2f7b06[_0x2bfa('0x44')][_0x2bfa('0x31')]),this[_0x2bfa('0x12')](),_0x3a047c[_0x2bfa('0x0')](),_0x3a047c[_0x2bfa('0x30')]());}),this[_0x2bfa('0xa')][_0x2bfa('0x13')](document,'mousedown',(_0x5566e1,_0x4c0c3d)=>{const _0x26745b=_0x4c0c3d[_0x2bfa('0x23')];_0x2f7b06[_0x2bfa('0x17')]&&_0x2f7b06[_0x2bfa('0x2a')][_0x2bfa('0x35')](_0x26745b)||_0x2c858c[_0x2bfa('0x4d')][_0x2bfa('0x2a')][_0x2bfa('0x35')](_0x26745b)||(this['_manuallyClosed']['clear'](),this[_0x2bfa('0x12')]());});}[_0x2bfa('0x3b')](){if(!this[_0x2bfa('0x1f')])throw new _0x10908b(_0x2bfa('0x1c'),this);const _0x25ded1=this[_0x2bfa('0x39')][_0x2bfa('0x4f')][_0x2bfa('0x18')](_0x2bfa('0x1e'));this[_0x2bfa('0x12')](),Array[_0x2bfa('0x1a')](this[_0x2bfa('0x2')]['values'](),_0x30eea6=>_0x30eea6[_0x2bfa('0x9')]()),this['_annotationViewToNarrowView']['clear'](),_0x25ded1[_0x2bfa('0x11')](),this['stopListening'](),this[_0x2bfa('0xa')][_0x2bfa('0x40')](),this['isAttached']=!0x1;}[_0x2bfa('0x9')](){this[_0x2bfa('0x1f')]&&this[_0x2bfa('0x3b')](),this[_0x2bfa('0x1')][_0x2bfa('0x27')]();}[_0x2bfa('0x14')](_0x2d2f41){if(this[_0x2bfa('0x29')][_0x2bfa('0x4')](_0x2d2f41))return;const _0x50540b=this[_0x2bfa('0x2b')][_0x2bfa('0x44')][_0x2bfa('0x31')];_0x50540b!==_0x2d2f41?(_0x50540b&&this[_0x2bfa('0xb')](_0x50540b),this['_attachListeners'](_0x2d2f41),this[_0x2bfa('0x2b')][_0x2bfa('0x44')]['clear'](),this['balloonPanelView'][_0x2bfa('0x44')][_0x2bfa('0x45')](_0x2d2f41),this['_updateBalloonPosition']()):this[_0x2bfa('0x25')]();}[_0x2bfa('0x25')](){const _0x534403=this[_0x2bfa('0x2b')][_0x2bfa('0x44')][_0x2bfa('0x31')];if(!this[_0x2bfa('0x2')]['has'](_0x534403))return;const _0x4c549c=this[_0x2bfa('0x2')]['get'](_0x534403)[_0x2bfa('0x2a')],_0x1dcd79=function(){const _0x22a297=_0x736668[_0x2bfa('0x3e')];return[_0x22a297['southArrowNorthEast'],_0x22a297[_0x2bfa('0x4a')],_0x22a297['southArrowNorth'],_0x22a297[_0x2bfa('0x38')],_0x22a297[_0x2bfa('0x28')],_0x22a297[_0x2bfa('0x5')]];}();this[_0x2bfa('0x2b')][_0x2bfa('0x3f')]({'target':_0x4c549c,'positions':_0x1dcd79});}[_0x2bfa('0x12')](){const _0x2b3bd3=this[_0x2bfa('0x2b')],_0x26187d=_0x2b3bd3[_0x2bfa('0x44')][_0x2bfa('0x31')];_0x26187d&&(this[_0x2bfa('0xb')](_0x26187d),_0x2b3bd3[_0x2bfa('0x3c')](),_0x2b3bd3[_0x2bfa('0x44')][_0x2bfa('0x37')]());}[_0x2bfa('0xd')](_0x562bac){this['listenTo'](_0x562bac,_0x2bfa('0x4e'),()=>this['_updateBalloonPosition']()),this[_0x2bfa('0x13')](_0x562bac,_0x2bfa('0x24'),(_0xe5282c,_0x1ab6be)=>{this[_0x2bfa('0x29')]['add'](_0x562bac),this[_0x2bfa('0x12')](),_0x1ab6be();});}['_detachListeners'](_0x2d48a8){this[_0x2bfa('0x40')](_0x2d48a8);}}