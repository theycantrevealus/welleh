/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3df5=['listenTo','_getTargetTop','getSidebarItemView','add','render','refresh','_sidebarItemViewToAnnotationView','_updateAnnotationTargetRect','_getMaxAvailableTop','setContainer','pluginName','config','context','content','class','sidebar.preventScrollOutOfView','view','unbind','getIndex','stopListening','change:bottom','length','sidebar-attachtocontainer-missing-container','top','_alignAfterItem','list','items','plugins','max','_updateLastItem','customView','set','requires','activeView','delete','destroy','_targetTop','_annotations','_attachToContainer','_annotationViewToSidebarItemView','_destroySidebarItemView','change:activeView','element','Annotations','define','appendChild','_getItemBefore','bottom','_setItemTop','locale','Sidebar','container','bind','clear','_spaceBetweenItems','minHeight','sidebar.container','get','_getItemAfter','_lastItem','_alignBeforeItem','_alignToTargetRect','updateHeight','remove','getAnnotationView','_createSidebarView'];(function(_0x47569e,_0x3df534){const _0x1fbb6f=function(_0x582789){while(--_0x582789){_0x47569e['push'](_0x47569e['shift']());}};_0x1fbb6f(++_0x3df534);}(_0x3df5,0x18f));const _0x1fbb=function(_0x47569e,_0x3df534){_0x47569e=_0x47569e-0x0;let _0x1fbb6f=_0x3df5[_0x47569e];return _0x1fbb6f;};import _0x55e8d1 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x2b299a from'./view/sidebarview';import _0x1530e5 from'./view/sidebaritemview';import _0x313fad from'../annotations/annotations';import _0x2f6fef from'@ckeditor/ckeditor5-utils/src/dom/rect';import{isElement as _0x35a383,throttle as _0x13ffa0}from'lodash-es';import _0x3d3738 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';export default class x extends _0x55e8d1{static get[_0x1fbb('0x1d')](){return[_0x313fad];}static get[_0x1fbb('0x7')](){return _0x1fbb('0x2f');}constructor(_0x3dbdd9){super(_0x3dbdd9),this['set'](_0x1fbb('0x38')),this[_0x1fbb('0xd')]=this[_0x1fbb('0x3e')](),this[_0x1fbb('0x1c')](_0x1fbb('0x30'),null),this[_0x1fbb('0x33')]=0x19,this[_0x1fbb('0x3')]=new Map(),this['_annotationViewToSidebarItemView']=new Map(),this[_0x1fbb('0x9')][_0x1fbb('0x8')][_0x1fbb('0x29')](_0x1fbb('0xc'),!0x1);}['init'](){this[_0x1fbb('0x22')]=this[_0x1fbb('0x9')][_0x1fbb('0x18')][_0x1fbb('0x36')](_0x1fbb('0x28'));const _0x25fc27=this['context']['config'][_0x1fbb('0x36')](_0x1fbb('0x35'));_0x25fc27&&this[_0x1fbb('0x6')](_0x25fc27);}[_0x1fbb('0x6')](_0xd77ade){if(!_0x35a383(_0xd77ade))throw new _0x3d3738('sidebar-setcontainer-invalid-element');this[_0x1fbb('0x30')]=_0xd77ade;}[_0x1fbb('0x23')]({viewClass:_0x2ed5a0='',spaceBetweenItems:_0x54f35=0x19}={}){const _0x17246d=this[_0x1fbb('0x9')][_0x1fbb('0x18')][_0x1fbb('0x36')](_0x313fad);if(!_0x35a383(this[_0x1fbb('0x30')]))throw new _0x3d3738(_0x1fbb('0x13'),this);this['container'][_0x1fbb('0x2a')](this[_0x1fbb('0xd')]['element']),this[_0x1fbb('0xd')][_0x1fbb('0xb')]=_0x2ed5a0,this[_0x1fbb('0x33')]=_0x54f35,this[_0x1fbb('0x3f')](_0x17246d,_0x1fbb('0x26'),(_0xac496e,_0x1aef83,_0x2e9b73)=>{if(_0x2e9b73){const _0x52728b=_0x17246d[_0x1fbb('0x3d')](_0x2e9b73),_0x7a8658=this[_0x1fbb('0x41')](_0x52728b);_0x7a8658&&this[_0x1fbb('0x3a')](_0x7a8658);}}),this['listenTo'](_0x17246d[_0x1fbb('0x17')],_0x1fbb('0x3c'),(_0x5828b6,_0x28571a,_0x22ec0a)=>{this['_destroySidebarItemView'](_0x28571a);const _0x26bcea=this[_0x1fbb('0x22')]['items']['get'](_0x22ec0a-0x1),_0x190b2b=this[_0x1fbb('0x22')]['items']['get'](_0x22ec0a);_0x26bcea&&this[_0x1fbb('0x3a')](this[_0x1fbb('0x41')](_0x26bcea)),_0x190b2b&&this['_alignToTargetRect'](this[_0x1fbb('0x41')](_0x190b2b)),this[_0x1fbb('0x1a')]();}),_0x17246d[_0x1fbb('0x2')]();}['_detachFromContainer'](){const _0x5de0e8=this[_0x1fbb('0x22')];this[_0x1fbb('0x10')](),this[_0x1fbb('0xd')][_0x1fbb('0x27')]['remove']();for(const _0x3e128f of _0x5de0e8[_0x1fbb('0x17')])this['_destroySidebarItemView'](_0x3e128f);this['view'][_0x1fbb('0x16')][_0x1fbb('0x32')](),this['view'][_0x1fbb('0xb')]='',this[_0x1fbb('0x38')]=null;}['addView'](_0x2a8ea8,_0x195b80){_0x195b80||(_0x195b80=_0x2a8ea8);const _0x5508d6=this[_0x1fbb('0x22')],_0x5e71af=new _0x1530e5(this[_0x1fbb('0x9')][_0x1fbb('0x2e')]);this['_sidebarItemViewToAnnotationView']['set'](_0x5e71af,_0x2a8ea8),this['_annotationViewToSidebarItemView'][_0x1fbb('0x1c')](_0x2a8ea8,_0x5e71af),_0x5e71af[_0x1fbb('0xa')][_0x1fbb('0x0')](_0x195b80),this['_alignToTargetRect'](_0x5e71af),this[_0x1fbb('0x3f')](_0x2a8ea8,'change:targetRect',()=>{const _0x4dddd9=this['_getTargetTop'](_0x5e71af);_0x5e71af[_0x1fbb('0x21')]!=_0x4dddd9&&(_0x5e71af['_targetTop']=_0x4dddd9,this[_0x1fbb('0x2d')](_0x5e71af,_0x4dddd9));}),this[_0x1fbb('0x3f')](_0x5e71af,'change:top',_0x13ffa0(()=>{if(!_0x5e71af[_0x1fbb('0xa')][_0x1fbb('0x12')])return;const _0x3f2a37=this[_0x1fbb('0x2b')](_0x5e71af);if(!_0x3f2a37)return;const _0x404fa9=this[_0x1fbb('0x3')]['get'](_0x3f2a37);_0x5508d6[_0x1fbb('0x1e')]===_0x404fa9['customView']?this[_0x1fbb('0x15')](_0x3f2a37,_0x5e71af):this[_0x1fbb('0x39')](_0x5e71af,_0x3f2a37);},0xa,{'leading':!0x1})),this['listenTo'](_0x5e71af,_0x1fbb('0x11'),_0x13ffa0(()=>{if(!_0x5e71af[_0x1fbb('0xa')][_0x1fbb('0x12')])return;const _0xdd7b7e=this[_0x1fbb('0x37')](_0x5e71af);if(!_0xdd7b7e)return;const _0x336c03=this['_sidebarItemViewToAnnotationView'][_0x1fbb('0x36')](_0xdd7b7e),_0x35700a=this['context'][_0x1fbb('0x8')][_0x1fbb('0x36')](_0x1fbb('0xc'));_0x5508d6[_0x1fbb('0x1e')]===_0x336c03['customView']&&_0x35700a?(this[_0x1fbb('0x39')](_0xdd7b7e,_0x5e71af),this[_0x1fbb('0x15')](_0x5e71af,_0xdd7b7e)):_0x5508d6['activeView']===_0x336c03[_0x1fbb('0x1b')]?this[_0x1fbb('0x39')](_0xdd7b7e,_0x5e71af):this[_0x1fbb('0x15')](_0x5e71af,_0xdd7b7e);},0xa,{'leading':!0x1}));const _0x4c1c98=this[_0x1fbb('0x2b')](_0x5e71af);if(_0x4c1c98)this[_0x1fbb('0x15')](_0x4c1c98,_0x5e71af)||this[_0x1fbb('0x3a')](_0x5e71af);else this[_0x1fbb('0x3a')](_0x5e71af);return this[_0x1fbb('0x1a')](),_0x5e71af;}[_0x1fbb('0x41')](_0x364e90){return this[_0x1fbb('0x24')][_0x1fbb('0x36')](_0x364e90);}[_0x1fbb('0x20')](){this['view'][_0x1fbb('0x20')]();}[_0x1fbb('0x25')](_0x781a07){const _0x388e28=this[_0x1fbb('0x41')](_0x781a07);this['stopListening'](_0x388e28),this['stopListening'](_0x781a07),_0x388e28[_0x1fbb('0x20')](),this[_0x1fbb('0x24')][_0x1fbb('0x1f')](_0x781a07),this[_0x1fbb('0x3')][_0x1fbb('0x1f')](_0x388e28);}[_0x1fbb('0x3e')](){const _0x31c063=new _0x2b299a(this[_0x1fbb('0x9')][_0x1fbb('0x2e')]);return _0x31c063[_0x1fbb('0x1')](),this['on']('change:_lastItem',(_0x347b18,_0x142d48,_0x484ee9,_0x344a92)=>{_0x344a92&&_0x31c063[_0x1fbb('0xe')](_0x1fbb('0x34')),_0x484ee9?_0x31c063[_0x1fbb('0x31')](_0x1fbb('0x34'))['to'](_0x484ee9,_0x1fbb('0x2c')):_0x31c063[_0x1fbb('0x34')]=null;}),_0x31c063;}[_0x1fbb('0x1a')](){this[_0x1fbb('0x38')]=this[_0x1fbb('0x41')](this[_0x1fbb('0x22')]['items']['last']);}['_getItemBefore'](_0x250840){const _0x77fb9a=this[_0x1fbb('0x22')][_0x1fbb('0x17')],_0x595a70=this[_0x1fbb('0x3')][_0x1fbb('0x36')](_0x250840),_0xcd9875=_0x77fb9a[_0x1fbb('0x36')](_0x77fb9a[_0x1fbb('0xf')](_0x595a70)-0x1);return this[_0x1fbb('0x41')](_0xcd9875);}[_0x1fbb('0x37')](_0x413a63){const _0x59cd68=this[_0x1fbb('0x22')][_0x1fbb('0x17')],_0x20cd09=this[_0x1fbb('0x3')][_0x1fbb('0x36')](_0x413a63),_0x17d608=_0x59cd68['get'](_0x59cd68['getIndex'](_0x20cd09)+0x1);return this['getSidebarItemView'](_0x17d608);}[_0x1fbb('0x39')](_0x2b85ad,_0x1875f2){_0x2b85ad[_0x1fbb('0x3b')]();const _0x301dac=O(_0x1875f2[_0x1fbb('0x2c')]+this['_spaceBetweenItems'],_0x2b85ad[_0x1fbb('0x14')]);return!!_0x301dac&&(this['_setItemTop'](_0x1875f2,_0x1875f2[_0x1fbb('0x14')]-_0x301dac),!0x0);}['_alignAfterItem'](_0x4fd637,_0x33f709){_0x4fd637[_0x1fbb('0x3b')]();const _0x50c447=O(_0x4fd637[_0x1fbb('0x2c')]+this[_0x1fbb('0x33')],_0x33f709[_0x1fbb('0x14')]);return!!_0x50c447&&(this[_0x1fbb('0x2d')](_0x33f709,_0x33f709[_0x1fbb('0x14')]+_0x50c447,!0x1),!0x0);}[_0x1fbb('0x3a')](_0xc2af3d){const _0x42b85e=this[_0x1fbb('0x9')]['plugins']['get'](_0x313fad),_0x41858e=this[_0x1fbb('0x3')]['get'](_0xc2af3d);_0x42b85e[_0x1fbb('0x4')](_0x41858e);const _0x101944=this[_0x1fbb('0x40')](_0xc2af3d);this['_setItemTop'](_0xc2af3d,_0x101944);}[_0x1fbb('0x40')](_0x29c37e){const _0x30d700=this[_0x1fbb('0x9')][_0x1fbb('0x18')][_0x1fbb('0x36')](_0x313fad),_0x49460d=this[_0x1fbb('0x3')][_0x1fbb('0x36')](_0x29c37e),_0x450ef8=_0x30d700['getTarget'](_0x49460d['customView']),_0x5469d8=_0x49460d['targetRect'];if(_0x450ef8 instanceof _0x2f6fef)return _0x5469d8[_0x1fbb('0x14')];{const {top:_0x17c3ef}=new _0x2f6fef(this['view'][_0x1fbb('0x27')]);return _0x5469d8[_0x1fbb('0x14')]-_0x17c3ef;}}[_0x1fbb('0x2d')](_0x5b7465,_0x5dcff4,_0x50ca0f=this['context'][_0x1fbb('0x8')][_0x1fbb('0x36')](_0x1fbb('0xc'))){_0x50ca0f&&(_0x5dcff4=Math[_0x1fbb('0x19')](_0x5dcff4,this[_0x1fbb('0x5')](_0x5b7465))),_0x5b7465[_0x1fbb('0x14')]=_0x5dcff4;}[_0x1fbb('0x5')](_0x4aada3){let _0x32d92c=this['_getItemBefore'](_0x4aada3),_0x412dff=0x0;for(;_0x32d92c;)_0x32d92c[_0x1fbb('0x3b')](),_0x412dff+=this[_0x1fbb('0x33')]+_0x32d92c['height'],_0x32d92c=this[_0x1fbb('0x2b')](_0x32d92c);return _0x412dff;}}function O(_0x406801,_0x388bea){return Math[_0x1fbb('0x19')](_0x406801-_0x388bea,0x0);}