/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3477=['view','Esc','uiType','get','inlineannotations-not-allowed-with-context','focusTracker','editor','pluginName','change:activeView','mousedown','isFocused','plugins','visibleView','remove','_manuallyClosed','destroy','listenTo','change:selectedViews','set','_addedViews','_addAnnotationToBalloon','targetRect','updatePosition','add','document','context','inlineannotations-detach-not-attached','includes','_removeAnnotationFromBalloon','inline','focus','detach','attach','change:visibleView','getAnnotationView','register','items','switchTo','editing','getTarget','showStack','Annotations','afterInit','inlineannotations-attach-already-attached','has','addObserver','requires','delete','refresh','hasView','_balloon','customView','isAttached','keystrokes','update','change:isFocused','change:height','stopListening','clear'];(function(_0x113cfe,_0x34772b){const _0x102687=function(_0x300989){while(--_0x300989){_0x113cfe['push'](_0x113cfe['shift']());}};_0x102687(++_0x34772b);}(_0x3477,0xac));const _0x1026=function(_0x113cfe,_0x34772b){_0x113cfe=_0x113cfe-0x0;let _0x102687=_0x3477[_0x113cfe];return _0x102687;};import _0x3b0308 from'@ckeditor/ckeditor5-core/src/plugin';import _0x227ebb from'../annotations/annotations';import _0x41097b from'./editorannotations';import _0x20362f from'@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';import _0x5209f0 from'@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver';import _0x2da02c from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import'./../../theme/annotation-inline.css';export default class A extends _0x3b0308{static get[_0x1026('0x33')](){return[_0x227ebb,_0x41097b,_0x20362f];}static get[_0x1026('0xc')](){return'InlineAnnotations';}constructor(_0x48a556){super(_0x48a556),_0x48a556[_0x1026('0x2b')][_0x1026('0x5')][_0x1026('0x32')](_0x5209f0),this['isAttached']=!0x1,this[_0x1026('0x13')]=new Set(),this[_0x1026('0x37')]=_0x48a556[_0x1026('0x10')]['get'](_0x20362f),this['_addedViews']=new Set();}['init'](){const _0x286e2b=this['editor'][_0x1026('0x10')]['get'](_0x227ebb);_0x286e2b['context']===this[_0x1026('0xb')]&&(_0x286e2b[_0x1026('0x28')](_0x1026('0x22'),this),this['editor'][_0x1026('0x3a')][_0x1026('0x17')](_0x1026('0x6'),(_0x54024f,_0x634b93)=>{const _0x3c3eb1=this[_0x1026('0x37')];this[_0x1026('0x39')]&&_0x3c3eb1[_0x1026('0x11')]&&_0x286e2b['items'][_0x1026('0x31')](_0x3c3eb1[_0x1026('0x11')])&&(this[_0x1026('0x13')][_0x1026('0x1c')](_0x3c3eb1[_0x1026('0x11')]),this[_0x1026('0x21')](_0x3c3eb1[_0x1026('0x11')]),_0x634b93());}));}[_0x1026('0x2f')](){const _0x31a95b=this['editor']['plugins']['get'](_0x227ebb);_0x31a95b[_0x1026('0x1e')]===this['editor']&&(_0x31a95b[_0x1026('0x7')]||_0x31a95b[_0x1026('0x2a')](_0x1026('0x22')));}[_0x1026('0x14')](){this[_0x1026('0x39')]&&this[_0x1026('0x24')]();}[_0x1026('0x25')](){const _0x1ee055=this[_0x1026('0xb')][_0x1026('0x10')][_0x1026('0x8')]('Annotations'),_0x279ef8=this[_0x1026('0x37')];if(this['isAttached'])throw new _0x2da02c(_0x1026('0x30'),this);if(_0x1ee055[_0x1026('0x1e')]!==this[_0x1026('0xb')])throw new _0x2da02c(_0x1026('0x9'),this);this[_0x1026('0x15')](this[_0x1026('0xb')]['ui']['focusTracker'],_0x1026('0x1'),(_0x46cfc9,_0xd7d8c,_0x595a51)=>{if(!_0x595a51)for(const _0x27d084 of _0x1ee055[_0x1026('0x29')])this['_removeAnnotationFromBalloon'](_0x27d084);}),this[_0x1026('0x15')](_0x1ee055[_0x1026('0x29')],_0x1026('0x12'),(_0x33c39f,_0x4637e3)=>{this[_0x1026('0x21')](_0x4637e3);}),this[_0x1026('0x15')](_0x1ee055,_0x1026('0x16'),(_0x5d438a,_0x32f096,_0x28ddd6,_0x236a48)=>{for(const _0x3db6de of _0x236a48)_0x28ddd6[_0x1026('0x20')](_0x3db6de)||this[_0x1026('0x13')][_0x1026('0x34')](_0x1ee055[_0x1026('0x27')](_0x3db6de));for(const _0x5571bd of _0x1ee055[_0x1026('0x29')])_0x28ddd6['includes'](_0x5571bd[_0x1026('0x38')])||this[_0x1026('0x21')](_0x5571bd);if(this[_0x1026('0xb')]['ui'][_0x1026('0xa')][_0x1026('0xf')])for(const _0x1fc9e0 of _0x28ddd6)this[_0x1026('0x19')](_0x1ee055['getAnnotationView'](_0x1fc9e0));}),this['listenTo'](_0x1ee055,_0x1026('0xd'),(_0x2e226a,_0x52c693,_0x216593)=>{_0x216593&&this[_0x1026('0xb')]['ui'][_0x1026('0xa')][_0x1026('0xf')]&&this[_0x1026('0x19')](_0x1ee055[_0x1026('0x27')](_0x216593),!0x0);}),this['listenTo'](_0x279ef8,_0x1026('0x26'),(_0x57c7e1,_0x56a24b,_0x3447b2,_0x289e37)=>{_0x289e37&&this[_0x1026('0x3')](_0x289e37),_0x3447b2&&_0x1ee055[_0x1026('0x29')]['has'](_0x3447b2)&&(this['listenTo'](_0x3447b2,_0x1026('0x2'),()=>_0x279ef8['updatePosition']()),this[_0x1026('0x15')](_0x3447b2,_0x1026('0x6'),()=>{this[_0x1026('0x13')][_0x1026('0x1c')](_0x3447b2),this[_0x1026('0x21')](_0x3447b2),this[_0x1026('0xb')]['editing']['view'][_0x1026('0x23')]();}),_0x1ee055['activeView']!==_0x3447b2[_0x1026('0x38')]&&(_0x1ee055['activeView']=_0x3447b2[_0x1026('0x38')]));}),this[_0x1026('0x15')](this[_0x1026('0xb')]['ui'],_0x1026('0x0'),()=>{_0x279ef8[_0x1026('0x11')]&&_0x1ee055['items'][_0x1026('0x31')](_0x279ef8[_0x1026('0x11')])&&_0x279ef8[_0x1026('0x1b')]();}),this[_0x1026('0x15')](this['editor']['editing'][_0x1026('0x5')][_0x1026('0x1d')],_0x1026('0xe'),()=>{this['_manuallyClosed'][_0x1026('0x4')](),_0x1ee055[_0x1026('0x35')]();}),this[_0x1026('0x39')]=!0x0;}[_0x1026('0x24')](){if(!this['isAttached'])throw new _0x2da02c(_0x1026('0x1f'),this);const _0x36b86d=this[_0x1026('0xb')][_0x1026('0x10')][_0x1026('0x8')](_0x1026('0x2e')),_0x4ad283=this[_0x1026('0x37')];for(const _0x3dde38 of this[_0x1026('0x18')])this[_0x1026('0x21')](_0x3dde38);this[_0x1026('0x3')](_0x36b86d['items']),this[_0x1026('0x3')](_0x36b86d),this['stopListening'](_0x4ad283),this[_0x1026('0x3')](this[_0x1026('0xb')]['ui']),this['stopListening'](this[_0x1026('0xb')]['ui'][_0x1026('0xa')]),this[_0x1026('0x3')](this['editor'][_0x1026('0x2b')][_0x1026('0x5')][_0x1026('0x1d')]),this[_0x1026('0x39')]=!0x1;}[_0x1026('0x19')](_0x1090eb,_0x4e7674){const _0x5190c5=this[_0x1026('0xb')][_0x1026('0x10')][_0x1026('0x8')](_0x227ebb);this[_0x1026('0x13')][_0x1026('0x31')](_0x1090eb)||(this[_0x1026('0x18')][_0x1026('0x31')](_0x1090eb)||this['_balloon']['hasView'](_0x1090eb)||(this[_0x1026('0x18')]['add'](_0x1090eb),this[_0x1026('0x37')]['add']({'stackId':_0x1090eb['id'],'view':_0x1090eb,'position':{'target':()=>_0x5190c5[_0x1026('0x2c')](_0x1090eb[_0x1026('0x38')])||_0x1090eb[_0x1026('0x1a')]}})),_0x4e7674&&this['_balloon'][_0x1026('0x2d')](_0x1090eb['id']));}['_removeAnnotationFromBalloon'](_0x24cec0){this[_0x1026('0x18')][_0x1026('0x31')](_0x24cec0)&&this[_0x1026('0x37')][_0x1026('0x36')](_0x24cec0)&&(this['_addedViews'][_0x1026('0x34')](_0x24cec0),this[_0x1026('0x37')]['remove'](_0x24cec0));}}