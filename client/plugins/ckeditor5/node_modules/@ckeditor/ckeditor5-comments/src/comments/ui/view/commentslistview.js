/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x59f2=['get','refreshVisibleViews','destroy','element','commentViews','editorConfig','formatDateTime','hasDirtyComment','_handleRemoveCommentModel','CommentView','_rearrangeCollapse','_handleNewCommentModel','ck-thread__comments','visibleViews','isActive','stopListening','render','_updateHasDirtyComment','listenTo','comments','length','set','setTemplate','_collapsedCommentsView','_rearrangeExpand','some','expand','change:hasDirtyComment','count','add','_shouldCollapse','viewUid','updateComment','maxCommentsWhenCollapsed','from','remove','_model','delete','delegate','collapse','weight','focus','insert','maxThreadTotalWeight','_config'];(function(_0x1ca7e9,_0x59f2fd){const _0x37bd05=function(_0x3bf4b2){while(--_0x3bf4b2){_0x1ca7e9['push'](_0x1ca7e9['shift']());}};_0x37bd05(++_0x59f2fd);}(_0x59f2,0xdc));const _0x37bd=function(_0x1ca7e9,_0x59f2fd){_0x1ca7e9=_0x1ca7e9-0x0;let _0x37bd05=_0x59f2[_0x1ca7e9];return _0x37bd05;};import _0x2462de from'@ckeditor/ckeditor5-ui/src/view';import _0x3b7da1 from'@ckeditor/ckeditor5-utils/src/diff';import _0x55df35 from'./collapsedcommentsview';import _0x1741cd from'@ckeditor/ckeditor5-utils/src/collection';export default class Ct extends _0x2462de{constructor(_0x183eee,_0x3b7801,_0x4059c6){super(_0x183eee),this[_0x37bd('0x1a')]('hasDirtyComment',!0x1),this['set']('length',_0x3b7801[_0x37bd('0x18')][_0x37bd('0x19')]),this['set'](_0x37bd('0x13'),!0x1),this['_model']=_0x3b7801,this['_config']=_0x4059c6,this[_0x37bd('0x9')]=this['createCollection'](),this[_0x37bd('0x12')]=this['createCollection'](),this[_0x37bd('0x1c')]=new _0x55df35(_0x183eee),this[_0x37bd('0x1c')]['bind'](_0x37bd('0x21'))['to'](this,'length',_0x3ddb00=>_0x3ddb00-this[_0x37bd('0x4')][_0x37bd('0x26')]);for(const _0x453588 of _0x3b7801[_0x37bd('0x18')])this['_handleNewCommentModel'](_0x453588);this[_0x37bd('0x17')](_0x3b7801['comments'],'add',(_0x3b8f2f,_0x4dfc12)=>{this[_0x37bd('0x19')]++,this['_handleNewCommentModel'](_0x4dfc12),this[_0x37bd('0x6')]();}),this[_0x37bd('0x17')](_0x3b7801['comments'],_0x37bd('0x28'),(_0x3a6f93,_0x39a9f8)=>{this[_0x37bd('0x19')]--,this[_0x37bd('0xd')](_0x39a9f8),this[_0x37bd('0x6')]();}),this['listenTo'](_0x3b7801,'commentUpdated',()=>this[_0x37bd('0x6')]()),this['on']('change:isActive',()=>this['refreshVisibleViews']()),this['on'](_0x37bd('0x20'),()=>this['refreshVisibleViews']()),this[_0x37bd('0x1b')]({'tag':'ul','attributes':{'class':[_0x37bd('0x11')]},'children':this[_0x37bd('0x12')]});}get[_0x37bd('0x23')](){return this[_0x37bd('0x29')][_0x37bd('0x0')]>this[_0x37bd('0x4')][_0x37bd('0x3')]&&!this['isActive']&&!this[_0x37bd('0xc')];}[_0x37bd('0x15')](){super['render'](),this[_0x37bd('0x6')]();}['focus'](){this[_0x37bd('0x8')][_0x37bd('0x1')]();}[_0x37bd('0x7')](){this[_0x37bd('0x1c')][_0x37bd('0x7')]();for(const _0x25c145 of this['commentViews'])_0x25c145[_0x37bd('0x7')]();super[_0x37bd('0x7')]();}[_0x37bd('0x6')](){this['_shouldCollapse']?this['_rearrangeCollapse']():this[_0x37bd('0x1d')]();}[_0x37bd('0x10')](_0x1a5741){const _0x5ab6de=new this['_config'][(_0x37bd('0xe'))](this['locale'],_0x1a5741,{'maxCommentCharsWhenCollapsed':this[_0x37bd('0x4')]['maxCommentCharsWhenCollapsed'],'formatDateTime':this[_0x37bd('0x4')][_0x37bd('0xb')],'editorConfig':this[_0x37bd('0x4')][_0x37bd('0xa')]});_0x5ab6de[_0x37bd('0x24')]=_0x1a5741['id'],_0x5ab6de[_0x37bd('0x2b')]('removeComment')['to'](this),_0x5ab6de[_0x37bd('0x2b')](_0x37bd('0x25'))['to'](this),this[_0x37bd('0x17')](_0x5ab6de,'change:isEditMode',()=>this[_0x37bd('0x16')]()),this[_0x37bd('0x9')]['add'](_0x5ab6de);}[_0x37bd('0xd')](_0x348944){const _0x344162=this[_0x37bd('0x9')][_0x37bd('0x28')](_0x348944['id']);this[_0x37bd('0x14')](_0x344162),_0x344162['isEditMode']&&this[_0x37bd('0x16')](),_0x344162[_0x37bd('0x7')]();}[_0x37bd('0x16')](){this['hasDirtyComment']=Array[_0x37bd('0x27')](this[_0x37bd('0x9')])[_0x37bd('0x1e')](_0x3590ab=>_0x3590ab['isEditMode']);}[_0x37bd('0xf')](){const _0x4ae061=function(_0x5013ba){const _0x3f0c3d=new _0x1741cd();for(const _0x39fa94 of _0x5013ba)_0x3f0c3d[_0x37bd('0x22')](_0x39fa94);return _0x3f0c3d;}(this[_0x37bd('0x9')]),_0x37bc7c=this[_0x37bd('0x1c')][_0x37bd('0x21')];for(let _0x3c0954=0x1;_0x3c0954<=_0x37bc7c;_0x3c0954++)_0x4ae061[_0x37bd('0x28')](0x1);for(const _0x4cb896 of _0x4ae061)_0x4cb896[_0x37bd('0x2c')]();_0x37bc7c>0x0&&_0x4ae061[_0x37bd('0x22')](this['_collapsedCommentsView'],0x1),Dt(_0x3b7da1(Array['from'](this[_0x37bd('0x12')]),Array['from'](_0x4ae061)),this[_0x37bd('0x12')],_0x4ae061);}['_rearrangeExpand'](){Dt(_0x3b7da1(Array['from'](this[_0x37bd('0x12')]),Array['from'](this['commentViews'])),this['visibleViews'],this[_0x37bd('0x9')]);for(const _0x286fd9 of this['visibleViews'])_0x286fd9[_0x37bd('0x1f')]();}}function Dt(_0x246ae8,_0x144db3,_0x59fb39){let _0x30f77e=0x0;for(const _0x1458cd of _0x246ae8)switch(_0x1458cd){case _0x37bd('0x2'):_0x144db3[_0x37bd('0x22')](_0x59fb39[_0x37bd('0x5')](_0x30f77e),_0x30f77e),_0x30f77e++;break;case _0x37bd('0x2a'):_0x144db3['remove'](_0x30f77e);break;case'equal':_0x30f77e++;}}