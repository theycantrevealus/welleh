/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x2a99e0 from'@ckeditor/ckeditor5-ui/src/view';import gt from'@ckeditor/ckeditor5-ui/src/viewcollection';import ut from'../commenteditor/commenteditor';import _0x1b6de8 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import _0x3f8739 from'@ckeditor/ckeditor5-utils/src/focustracker';import Bt from'@ckeditor/ckeditor5-ui/src/focuscycler';import _0x45be7a from'@ckeditor/ckeditor5-utils/src/keystrokehandler';import Ot from'@ckeditor/ckeditor5-core/theme/icons/check.svg';import St from'@ckeditor/ckeditor5-core/theme/icons/cancel.svg';export default class Mt extends _0x2a99e0{constructor(_0x434c46,_0x2e66e5={}){super(_0x434c46);const {t:t}=_0x434c46;this['editor']=new ut(_0x2e66e5),this['keystrokes']=new _0x45be7a(),this['focusTracker']=new _0x3f8739(),this['set']('value',_0x2e66e5['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',t('Reply...')),this['submitButtonView']=this['_createSubmitButton'](),this['cancelButtonView']=this['_createCancelButton'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x1c9ae7,_0x5c570c)=>{this['cancelButtonView']['fire']('execute'),_0x5c570c();}),this['on']('submit',(_0x4428bb,_0x359202)=>{_0x359202['length']>0xfa0?(alert(t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},[_0x359202['length'],0xfa0])),_0x4428bb['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render']();const {editor:_0x101cf3,element:_0x12aecf}=this;this['keystrokes']['listenTo'](_0x12aecf),this['focusTracker']['add'](_0x12aecf),_0x101cf3['create']()['then'](()=>{_0x12aecf['insertBefore'](_0x101cf3['ui']['element'],_0x12aecf['firstChild']),_0x101cf3['model']['document']['on']('change',()=>this['value']=_0x101cf3['getData']()),_0x101cf3['bind']('placeholder')['to'](this),this['_initializeFocusCycling'](_0x101cf3),this['fire']('editorReady');});}['focus'](){this['editor']['focus']();}['destroy'](){return this['_isDestroyed']?Promise['resolve']():(this['_isDestroyed']=!0x0,this['isRendered']?this['editor']['destroy']()['then'](()=>super['destroy']()):Promise['resolve'](super['destroy']()));}['_createSubmitButton'](){const _0x5dfc39=new _0x1b6de8(this['locale']),{t:t}=this['locale'];return _0x5dfc39['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x5dfc39['label']=t('Submit'),_0x5dfc39['icon']=Ot,_0x5dfc39['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x5dfc39['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x4c72f2,_0x5a09f0)=>!_0x5a09f0&&!!_0x4c72f2['trim']()),_0x5dfc39;}['_createCancelButton'](){const _0xa96e9e=new _0x1b6de8(this['locale']),{t:t}=this['locale'];return _0xa96e9e['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0xa96e9e['label']=t('Cancel'),_0xa96e9e['icon']=St,_0xa96e9e['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0xa96e9e;}['_initializeFocusCycling'](_0x887b79){const _0x53e555=this['focusTracker'],_0x4de0c0=new gt();[_0x887b79['ui']['view'],this['submitButtonView'],this['cancelButtonView']]['forEach'](_0x39bf7b=>{_0x4de0c0['add'](_0x39bf7b),_0x53e555['add'](_0x39bf7b['element']);});const _0x1be008=new Bt({'focusables':_0x4de0c0,'focusTracker':_0x53e555});this['keystrokes']['set']('tab',(_0x2f06b3,_0x4bda4e)=>{_0x1be008['focusNext'](),_0x4bda4e();},{'priority':'low'}),this['keystrokes']['set']('shift\x20+\x20tab',(_0x5985a5,_0x3679db)=>{_0x1be008['focusPrevious'](),_0x3679db();},{'priority':'low'});}}