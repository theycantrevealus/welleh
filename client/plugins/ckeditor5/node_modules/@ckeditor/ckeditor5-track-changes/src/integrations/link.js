/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x38895e from'@ckeditor/ckeditor5-core/src/plugin';import _0x40b606 from'@ckeditor/ckeditor5-typing/src/utils/findattributerange';import{getRangesWithAttribute as Rt}from'./utils';export default class Z extends _0x38895e{['afterInit'](){const _0x5eae24=this['editor'];if(!_0x5eae24['plugins']['has']('LinkEditing'))return;const _0x3d5b10=_0x5eae24['plugins']['get']('TrackChangesEditing');_0x3d5b10['enableCommand']('link',(_0x2f6fcf,_0x32ecc7)=>{const _0x2cc8f2=_0x5eae24['model']['document']['selection'];let _0xeff937=[];if(_0x2cc8f2['isCollapsed']){if(!_0x2cc8f2['hasAttribute']('linkHref'))return void _0x2f6fcf(_0x32ecc7);{const _0x571f8f=_0x40b606(_0x2cc8f2['getFirstPosition'](),'linkHref',_0x2cc8f2['getAttribute']('linkHref'),_0x5eae24['model']);_0xeff937=[_0x571f8f];}}else _0xeff937=Array['from'](_0x2cc8f2['getRanges']());_0x5eae24['model']['change'](()=>{for(const _0x32de4e of _0xeff937)_0x3d5b10['markInlineFormat'](_0x32de4e,{'commandName':'link','commandParams':[_0x32ecc7]});});}),_0x3d5b10['enableCommand']('unlink',()=>{const _0x1fccd4=this['editor']['model'],_0x106e9e=_0x1fccd4['document']['selection'];_0x1fccd4['change'](()=>{let _0x17161c=[];if(_0x106e9e['isCollapsed'])_0x17161c=[_0x40b606(_0x106e9e['getFirstPosition'](),'linkHref',_0x106e9e['getAttribute']('linkHref'),_0x5eae24['model'])];else _0x17161c=Rt('linkHref',_0x106e9e['getFirstRange'](),_0x5eae24['model']);for(const _0x1ee30a of _0x17161c)_0x3d5b10['markInlineFormat'](_0x1ee30a,{'commandName':'unlink','commandParams':[]});});}),_0x3d5b10['_descriptionFactory']['registerDescriptionCallback'](_0x47be16=>{const {data:_0x2f134a}=_0x47be16,{t:t}=_0x5eae24['locale'];if(_0x2f134a){if('link'==_0x2f134a['commandName'])return{'type':'format','content':t('*Set\x20link:*\x20%0','\x22'+_0x2f134a['commandParams'][0x0]+'\x22')};return'unlink'==_0x2f134a['commandName']?{'type':'format','content':t('*Remove\x20link*')}:void 0x0;}});}}