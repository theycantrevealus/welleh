/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x1472d2 from'@ckeditor/ckeditor5-core/src/plugin';import _0x33d6e6 from'@ckeditor/ckeditor5-table/src/tablewalker';import _0x1a83df from'@ckeditor/ckeditor5-engine/src/model/liverange';import{getColumnIndexes as _0xce5ee3,getRowIndexes as _0x1ffccc,getSelectionAffectedTableCells as _0x7a4a82}from'@ckeditor/ckeditor5-table/src/utils/selection';import'../../theme/integrations/table.css';export default class ft extends _0x1472d2{['afterInit'](){const _0x2c7e07=this['editor'];if(!_0x2c7e07['plugins']['has']('TableEditing'))return;const {t:t}=_0x2c7e07['locale'],_0x44960d=_0x2c7e07['plugins']['get']('TrackChangesEditing'),_0x4c1ffd=_0x2c7e07['plugins']['get']('TableUtils');_0x44960d['_descriptionFactory']['registerElementLabel']('table',_0x23d510=>t({'string':'table','plural':'%0\x20tables','id':'ELEMENT_TABLE'},_0x23d510)),this['_tableSuggestions']=new Set(),_0x2c7e07['model']['document']['on']('change:data',()=>{const _0x41e5c4=Array['from'](_0x2c7e07['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x1bc953,data:_0x27daea}of _0x41e5c4){const {group:_0x5b5e9f,id:_0x1f6c4d,subType:_0x1e9972}=_0x44960d['_splitMarkerName'](_0x1bc953);if('suggestion'!=_0x5b5e9f)continue;if(null!=_0x27daea['oldRange'])continue;const _0x29ed9e=_0x44960d['getSuggestion'](_0x1f6c4d);'tableRow'!=_0x1e9972&&'tableColumn'!=_0x1e9972&&'mergeTableCells'!=_0x1e9972||this['_tableSuggestions']['add'](_0x29ed9e);}},{'priority':'low'}),_0x44960d['enableCommand']('insertTable'),_0x44960d['enableCommand']('selectTableRow'),_0x44960d['enableCommand']('selectTableColumn');for(const _0x549bd4 of['insertTableRowAbove','insertTableRowBelow']){const _0x3287fc=_0x2c7e07['commands']['get'](_0x549bd4);_0x44960d['enableCommand'](_0x549bd4,_0x495ba2=>{_0x2c7e07['model']['change'](_0xccea05=>{_0x495ba2();const _0x5ccc65=_0x2c7e07['model']['document']['selection'],_0x47225f='above'===_0x3287fc['order'],_0x192113=_0x7a4a82(_0x5ccc65),_0x1bf812=_0x1ffccc(_0x192113),_0x8cc0a1=_0x47225f?_0x1bf812['first']-0x1:_0x1bf812['last']+0x1,_0x409afc=se('table',_0x192113[0x0]),_0x1c1e7a=new _0x33d6e6(_0x409afc,{'startRow':_0x8cc0a1,'endRow':_0x8cc0a1}),_0xd1f5cc=Array['from'](_0x1c1e7a)['map'](_0x11acef=>_0xccea05['createRangeOn'](_0x11acef['cell']));_0x44960d['markMultiRangeInsertion'](_0xd1f5cc,'tableRow');});});}for(const _0x13d7aa of['insertTableColumnLeft','insertTableColumnRight']){const _0x2ef14c=_0x2c7e07['commands']['get'](_0x13d7aa);_0x44960d['enableCommand'](_0x13d7aa,_0x2cb194=>{_0x2c7e07['model']['change'](_0x5b97e9=>{_0x2cb194();const _0x2918c3=_0x2c7e07['model']['document']['selection'],_0x1df14d='left'===_0x2ef14c['order'],_0x1a86bb=_0x7a4a82(_0x2918c3),_0x1bf788=_0xce5ee3(_0x1a86bb),_0x5e8ff8=_0x1df14d?_0x1bf788['first']-0x1:_0x1bf788['last']+0x1,_0x33cf3b=se('table',_0x1a86bb[0x0]),_0x35addc=new _0x33d6e6(_0x33cf3b,{'startRow':0x0,'column':_0x5e8ff8,'includeAllSlots':!0x1}),_0x37fea3=Array['from'](_0x35addc)['map'](_0x3ea02d=>_0x5b97e9['createRangeOn'](_0x3ea02d['cell']));_0x44960d['markMultiRangeInsertion'](_0x37fea3,'tableColumn');});});}for(const _0x3cbc71 of['removeTableRow','removeTableColumn']){const _0x36cfac=_0x3cbc71['substr'](0xb),_0x3edd46=_0x36cfac['toLowerCase'](),_0xe4c9ed=_0x3edd46['substr'](0x0,0x3)+'span',_0x36a249='table'+_0x36cfac,_0x386a01='min'+_0x36cfac,_0x2fe4e0='max'+_0x36cfac;_0x44960d['enableCommand'](_0x3cbc71,()=>{_0x2c7e07['model']['change'](_0x33e096=>{const _0x2130dd=_0x7a4a82(_0x2c7e07['model']['document']['selection']),_0x1ec811=se('table',_0x2130dd[0x0]);let _0x4a4dbc;if('removeTableRow'==_0x3cbc71){const _0x59ea62=_0x1ffccc(_0x2130dd);_0x4a4dbc={'startRow':_0x59ea62['first'],'endRow':_0x59ea62['last'],'includeAllSlots':!0x0};}else{const _0x2d1b9e=_0xce5ee3(_0x2130dd);_0x4a4dbc={'startColumn':_0x2d1b9e['first'],'endColumn':_0x2d1b9e['last'],'includeAllSlots':!0x0};}const _0x4399a1=new _0x33d6e6(_0x1ec811,_0x4a4dbc),_0x146d98=Array['from'](_0x4399a1),_0xfb24a7=_0x146d98['filter'](_0xaf926a=>_0xaf926a['cell']['hasAttribute'](_0xe4c9ed)),_0x3ff582=_0x146d98['filter'](_0x430f87=>!_0x430f87['cell']['hasAttribute'](_0xe4c9ed))['map'](_0x39baa2=>_0x33e096['createRangeOn'](_0x39baa2['cell'])),_0x4e38e5=_0x44960d['markMultiRangeDeletion'](_0x3ff582,_0x36a249);if(_0x4e38e5&&('tableRow'==_0x4e38e5['subType']||'tableColumn'==_0x4e38e5['subType'])){const _0x49a687=this['_getSuggestionCoords'](_0x4e38e5);for(const _0x2829e1 of _0xfb24a7){const _0x5938c8=_0x33e096['createRangeOn'](_0x2829e1['cell']),_0x3a7801=_0x4c1ffd['getCellLocation'](_0x2829e1['cell']),_0x323ff3=_0x2829e1['cell']['getAttribute'](_0xe4c9ed)-0x1,_0x83d489=_0x49a687[_0x386a01],_0x352caf=_0x49a687[_0x2fe4e0];_0x83d489<=_0x3a7801[_0x3edd46]&&_0x3a7801[_0x3edd46]+_0x323ff3<=_0x352caf&&_0x4e38e5['addRange'](_0x5938c8);}}});});}_0x44960d['enableCommand']('setTableRowHeader',(_0x5df090,_0x1c8b56)=>{const _0x59ee74=_0x7a4a82(_0x2c7e07['model']['document']['selection']),_0x3cccda=_0x1ffccc(_0x59ee74),_0x3ae3fe=se('table',_0x59ee74[0x0]),_0x40700e=_0x3ae3fe['getAttribute']('headingRows')||0x0,_0x399001=_0x1c8b56&&null!==_0x1c8b56['forceValue']?_0x1c8b56['forceValue']:!_0x2c7e07['commands']['get']('setTableRowHeader')['value'],_0x4584d5=_0x399001?_0x3cccda['last']:_0x3cccda['first'],_0x246224=_0x3ae3fe['getChild'](_0x4584d5);let _0x17e650;if(_0x399001){const _0x154090=_0x3ae3fe['getChild'](_0x40700e);if(_0x246224['index']<_0x154090['index'])return;_0x17e650=_0x2c7e07['model']['createRange'](_0x2c7e07['model']['createPositionBefore'](_0x154090['getChild'](0x0)),_0x2c7e07['model']['createPositionAfter'](_0x246224['getChild'](_0x246224['childCount']-0x1)));}else{const _0x363d23=_0x3ae3fe['getChild'](_0x40700e-0x1);if(!_0x363d23)return;_0x17e650=_0x2c7e07['model']['createRange'](_0x2c7e07['model']['createPositionBefore'](_0x246224['getChild'](0x0)),_0x2c7e07['model']['createPositionAfter'](_0x363d23['getChild'](_0x363d23['childCount']-0x1)));}_0x2c7e07['model']['change'](()=>{_0x44960d['markBlockFormat'](_0x17e650,{'commandName':'setTableRowHeader','commandParams':[{'forceValue':_0x399001}]},[],'setTableRowHeader');});}),_0x44960d['enableCommand']('setTableColumnHeader',(_0x168899,_0x5ce081)=>{const _0x3a9d54=_0x7a4a82(_0x2c7e07['model']['document']['selection']),_0x425375=_0xce5ee3(_0x3a9d54),_0x34bacb=se('table',_0x3a9d54[0x0]),_0x44bcbc=_0x34bacb['getAttribute']('headingColumns')||0x0,_0x283406=_0x5ce081&&null!==_0x5ce081['forceValue']?_0x5ce081['forceValue']:!_0x2c7e07['commands']['get']('setTableColumnHeader')['value'];let _0x5e9cc0;const _0x241de9=_0x34bacb['getChild'](0x0),_0x37b38e=_0x283406?_0x425375['last']:_0x425375['first'],_0xa6126d=new _0x33d6e6(_0x34bacb,{'startRow':0x0,'column':_0x37b38e,'includeAllSlots':!0x1}),_0x336cd0=Array['from'](_0xa6126d)[0x0]['cell'];if(_0x283406){const _0x57379f=_0x241de9['getChild'](_0x44bcbc);if(_0x336cd0['isBefore'](_0x57379f))return;_0x5e9cc0=_0x2c7e07['model']['createRange'](_0x2c7e07['model']['createPositionBefore'](_0x57379f),_0x2c7e07['model']['createPositionAfter'](_0x336cd0));}else{const _0x4002b1=_0x241de9['getChild'](_0x44bcbc-0x1);if(!_0x4002b1)return;_0x5e9cc0=_0x2c7e07['model']['createRange'](_0x2c7e07['model']['createPositionBefore'](_0x336cd0),_0x2c7e07['model']['createPositionAfter'](_0x4002b1));}_0x2c7e07['model']['change'](()=>{_0x44960d['markBlockFormat'](_0x5e9cc0,{'commandName':'setTableColumnHeader','commandParams':[{'forceValue':_0x283406}]},[],'setTableColumnHeader');});});for(const _0x7fe0dd of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft']){const _0x5aafcb=_0x2c7e07['commands']['get'](_0x7fe0dd);_0x44960d['enableCommand'](_0x7fe0dd,()=>{const _0x251646=_0x2c7e07['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x41c94c=>_0x41c94c['is']('element','tableCell')),_0x3c3471=_0x5aafcb['value'];_0x2c7e07['model']['change'](()=>{_0x44960d['markMultiRangeBlockFormat']([_0x251646,_0x3c3471],{'commandName':'mergeTableCells','commandParams':[]},[],'mergeTableCells');});});}for(const _0x2d9c96 of['splitTableCellVertically','splitTableCellHorizontally']){const _0x20f331=_0x2c7e07['commands']['get'](_0x2d9c96);_0x44960d['enableCommand'](_0x2d9c96,()=>{const _0x513fe2=_0x2c7e07['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x4da74d=>_0x4da74d['is']('element','tableCell')),_0x337433=_0x513fe2['parent']['parent'],{column:_0x478ddd,row:_0x38b622}=_0x4c1ffd['getCellLocation'](_0x513fe2);let _0x295ac3=[];if('horizontally'==_0x20f331['direction']){const _0x1147fb=new _0x33d6e6(_0x337433,{'startRow':_0x38b622,'endRow':_0x38b622,'includeAllSlots':!0x0});_0x295ac3=Array['from'](_0x1147fb)['map'](_0x379244=>_0x379244['cell']);}else{const _0x2ecae9=new _0x33d6e6(_0x337433,{'column':_0x478ddd,'includeAllSlots':!0x0});_0x295ac3=Array['from'](_0x2ecae9)['map'](_0x4efc77=>_0x4efc77['cell']);}_0x2c7e07['model']['change'](_0x1347ab=>{_0x44960d['markBlockFormat'](_0x1347ab['createRangeOn'](_0x513fe2),{'commandName':_0x2d9c96,'commandParams':[]},_0x295ac3,_0x2d9c96);});});}_0x2c7e07['editing']['downcastDispatcher']['on']('addMarker:suggestion',(_0x1bb24c,_0x237845,_0x34a6a6)=>{const {type:_0x161280,id:_0xf0e161}=_0x44960d['_splitMarkerName'](_0x237845['markerName']),_0x295e66=_0x44960d['getSuggestion'](_0xf0e161);if(!_0x295e66['data']||'setTableColumnHeader'!=_0x295e66['data']['commandName'])return;if(_0x237845['item'])return void _0x1bb24c['stop']();if(!_0x34a6a6['consumable']['consume'](_0x237845['markerRange'],_0x1bb24c['name']))return;const _0xc6ca66=_0x237845['markerRange']['start']['nodeAfter'],_0x5917a5=_0x237845['markerRange']['end']['nodeBefore'],_0x1cd4a1=_0xc6ca66['parent']['parent'],{column:_0x43215f}=_0x4c1ffd['getCellLocation'](_0xc6ca66),{column:_0x51ee94}=_0x4c1ffd['getCellLocation'](_0x5917a5);for(let _0x21a256=_0x43215f;_0x21a256<=_0x51ee94;_0x21a256++){const _0x1298e9=new _0x33d6e6(_0x1cd4a1,{'column':_0x21a256,'includeAllSlots':!0x1});for(const _0x2ae5f6 of _0x1298e9){const _0x1d3991=_0x2ae5f6['cell'],_0x5b632b=_0x34a6a6['mapper']['toViewElement'](_0x1d3991);_0x34a6a6['writer']['addClass']('ck-suggestion-marker-'+_0x161280,_0x5b632b),_0x34a6a6['mapper']['bindElementToMarker'](_0x5b632b,_0x237845['markerName']),_0x44960d['activeMarkers']['includes'](_0x237845['markerName'])?_0x34a6a6['writer']['addClass']('ck-suggestion-marker--active',_0x5b632b):_0x34a6a6['writer']['removeClass']('ck-suggestion-marker--active',_0x5b632b);}}},{'priority':'highest'}),_0x2c7e07['editing']['downcastDispatcher']['on']('removeMarker:suggestion',(_0x296bfd,_0x95694e,_0xa2dce3)=>{const {type:_0x1b9478,id:_0x8c400f}=_0x44960d['_splitMarkerName'](_0x95694e['markerName']),_0x5b45bf=_0x44960d['getSuggestion'](_0x8c400f);if(!_0x5b45bf['data']||'setTableColumnHeader'!=_0x5b45bf['data']['commandName'])return;const _0x9ac6ea=_0xa2dce3['mapper']['markerNameToElements'](_0x95694e['markerName']);if(_0x9ac6ea)for(const _0x5b4585 of _0x9ac6ea)_0xa2dce3['writer']['removeClass']('ck-suggestion-marker-'+_0x1b9478,_0x5b4585),_0xa2dce3['writer']['removeClass']('ck-suggestion-marker--active',_0x5b4585),_0xa2dce3['mapper']['unbindElementFromMarkerName'](_0x5b4585,_0x95694e['markerName']);},{'priority':'highest'}),_0x44960d['_descriptionFactory']['registerDescriptionCallback'](_0x223624=>{if('insertion'!=_0x223624['type']&&'deletion'!=_0x223624['type'])return;const _0x172d32=_0x223624['getContainedElement']();if(null!=_0x172d32&&_0x172d32['is']('element','table')){if('insertion'==_0x223624['type']){const _0x5039e5=_0x223624['getItems']()['filter'](_0x43bdb9=>_0x43bdb9['is']('textProxy'))['map'](_0x1dc1be=>_0x1dc1be['data']);if(_0x5039e5['length'])return{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20*with\x20text*\x20%0','id':'ELEMENT_TABLE_WITH_TEXT'},'\x22'+_0x5039e5['join']('\x20')+'\x22'))};}if('deletion'==_0x223624['type']){const _0x4e9d6b=_0x223624['getItems']()['filter'](_0x1fcfe9=>_0x1fcfe9['is']('textProxy'))['map'](_0x616155=>_0x616155['data']);if(_0x4e9d6b['length'])return{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20*with\x20text*\x20%0','id':'ELEMENT_TABLE_WITH_TEXT'},'\x22'+_0x4e9d6b['join']('\x20')+'\x22'))};}}}),_0x44960d['_descriptionFactory']['registerDescriptionCallback'](_0x2c8c3f=>{if('tableRow'==_0x2c8c3f['subType']){const _0x33be17=_0x2c8c3f['getItems']()['filter'](_0x54597c=>_0x54597c['is']('textProxy'))['map'](_0x2a6a2d=>_0x2a6a2d['data']),_0xa44638=this['_getSuggestionCoords'](_0x2c8c3f),_0x29b7b9=_0xa44638['maxRow']-_0xa44638['minRow']+0x1;if('insertion'==_0x2c8c3f['type'])return _0x33be17['length']?{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20row\x20*with\x20text*\x20%1','plural':'%0\x20table\x20rows\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_ROW_WITH_TEXT'},[_0x29b7b9,'\x22'+_0x33be17['join']('\x20')+'\x22']))}:{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20row','plural':'%0\x20table\x20rows','id':'ELEMENT_TABLE_ROW'},_0x29b7b9))};if('deletion'==_0x2c8c3f['type'])return _0x33be17['length']?{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20row\x20*with\x20text*\x20%1','plural':'%0\x20table\x20rows\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_ROW_WITH_TEXT'},[_0x29b7b9,'\x22'+_0x33be17['join']('\x20')+'\x22']))}:{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20row','plural':'%0\x20table\x20rows','id':'ELEMENT_TABLE_ROW'},_0x29b7b9))};}if('tableColumn'==_0x2c8c3f['subType']){const _0xe0eeb7=_0x2c8c3f['getItems']()['filter'](_0x225e7e=>_0x225e7e['is']('textProxy'))['map'](_0x47f69d=>_0x47f69d['data']),_0x790655=this['_getSuggestionCoords'](_0x2c8c3f),_0x394af4=_0x790655['maxColumn']-_0x790655['minColumn']+0x1;if('insertion'==_0x2c8c3f['type'])return _0xe0eeb7['length']?{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20column\x20*with\x20text*\x20%1','plural':'%0\x20table\x20columns\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_COLUMN_WITH_TEXT'},[_0x394af4,'\x22'+_0xe0eeb7['join']('\x20')+'\x22']))}:{'type':'insertion','content':t('*Insert:*\x20%0',t({'string':'table\x20column','plural':'%0\x20table\x20columns','id':'ELEMENT_TABLE_COLUMN'},_0x394af4))};if('deletion'==_0x2c8c3f['type'])return _0xe0eeb7['length']?{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20column\x20*with\x20text*\x20%1','plural':'%0\x20table\x20columns\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_COLUMN_WITH_TEXT'},[_0x394af4,'\x22'+_0xe0eeb7['join']('\x20')+'\x22']))}:{'type':'deletion','content':t('*Remove:*\x20%0',t({'string':'table\x20column','plural':'%0\x20table\x20columns','id':'ELEMENT_TABLE_COLUMN'},_0x394af4))};}}),_0x44960d['_descriptionFactory']['registerDescriptionCallback'](_0x5d8ae3=>{const {data:_0x2b7824}=_0x5d8ae3;if(_0x2b7824){if('setTableRowHeader'==_0x2b7824['commandName']){const _0x31d93c=_0x2b7824['commandParams'][0x0]['forceValue'];return _0x10f393(t(_0x31d93c?{'string':'header\x20row','id':'FORMAT_HEADER_ROW'}:{'string':'regular\x20row','id':'FORMAT_REGULAR_ROW'}));}if('setTableColumnHeader'==_0x2b7824['commandName']){const _0x2c42e1=_0x2b7824['commandParams'][0x0]['forceValue'];return _0x10f393(t(_0x2c42e1?{'string':'header\x20column','id':'FORMAT_HEADER_COLUMN'}:{'string':'regular\x20column','id':'FORMAT_REGULAR_COLUMN'}));}}function _0x10f393(_0x3f04d5){return{'type':'format','content':t('*Format:*\x20%0',_0x3f04d5)};}});for(const _0x2cefa3 of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft'])_0x44960d['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x2cefa3,'accept',_0x4b5d7b);_0x44960d['_descriptionFactory']['registerDescriptionCallback'](_0x5f525f=>{const {data:_0x30a79a}=_0x5f525f;if(_0x30a79a)return'splitTableCellVertically'==_0x30a79a['commandName']?{'type':'format','content':t('*Split\x20cell:*\x20vertically')}:'splitTableCellHorizontally'==_0x30a79a['commandName']?{'type':'format','content':t('*Split\x20cell:*\x20horizontally')}:void 0x0;});for(const _0x4e4ce8 of['splitTableCellVertically','splitTableCellHorizontally'])_0x44960d['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x4e4ce8,'accept',_0x4b5d7b);const _0x5a5915=(_0x239868,_0x8a790d)=>{let _0x195edd=!0x1;const _0x2c01bf=_0x8a790d['createRangeOn'](_0x239868),_0x281255=_0x239868['parent']['parent'],_0x4c129a=_0x4c1ffd['getCellLocation'](_0x239868);for(const _0x4dd0e0 of this['_tableSuggestions']){const _0x395078=_0x4dd0e0['subType']['substr'](0x5),_0x567fc1=_0x395078['toLowerCase'](),_0x564927=_0x567fc1['substr'](0x0,0x3)+'span',_0x23364e='min'+_0x395078,_0x537fef='max'+_0x395078;if(!_0x4dd0e0['isInContent'])continue;if(_0x281255!=_0x4dd0e0['getFirstRange']()['start']['parent']['parent'])continue;if(_0x4dd0e0['isIntersectingWithRange'](_0x2c01bf))continue;const _0x3ca0e5=_0x239868['hasAttribute'](_0x564927)?_0x239868['getAttribute'](_0x564927)-0x1:0x0,_0xdfaba5=this['_getSuggestionCoords'](_0x4dd0e0),_0x47db3b=_0xdfaba5[_0x23364e],_0x215c31=_0xdfaba5[_0x537fef];_0x47db3b<=_0x4c129a[_0x567fc1]&&_0x4c129a[_0x567fc1]+_0x3ca0e5<=_0x215c31&&(_0x4dd0e0['addRange'](_0x2c01bf),_0x195edd=!0x0);}return _0x195edd;};_0x2c7e07['model']['document']['registerPostFixer'](_0x5d2e92=>{let _0x26f413=!0x1;for(const _0xa007b6 of _0x2c7e07['model']['document']['differ']['getChanges']())if('insert'==_0xa007b6['type']){if('tableRow'==_0xa007b6['name'])for(const _0x5920f6 of _0xa007b6['position']['nodeAfter']['getChildren']())_0x26f413=_0x26f413||_0x5a5915(_0x5920f6,_0x5d2e92);else'tableCell'==_0xa007b6['name']&&(_0x26f413=_0x26f413||_0x5a5915(_0xa007b6['position']['nodeAfter'],_0x5d2e92));}return _0x26f413;});for(const _0x34532e of['mergeTableCellUp','mergeTableCellDown','mergeTableCellLeft','mergeTableCellRight']){const _0x642f96=_0x2c7e07['commands']['get'](_0x34532e);_0x642f96['on']('set:isEnabled',(_0x54a5b0,_0x21c341,_0x50b8fb)=>{if(_0x50b8fb){const _0x5e9625=_0x2c7e07['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x4db87f=>_0x4db87f['is']('element','tableCell'));this['_areMergableCells'](_0x642f96['value'],_0x5e9625)||(_0x54a5b0['return']=!0x1,_0x54a5b0['stop']());}},{'priority':'low'});}_0x44960d['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableRowHeader','accept',_0x4b5d7b),_0x44960d['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableColumnHeader','accept',_0x4b5d7b);const _0x574011=_0x2c7e07['model']['document']['selection'];function _0x4b5d7b(_0x1e87e5,_0x3fc2d8){_0x2c7e07['model']['change'](_0x35a112=>{const {commandName:_0x1eb964,commandParams:_0x1bc11f}=_0x3fc2d8;let _0x24040c=_0x1e87e5[0x0]['end']['nodeBefore'];_0x1bc11f&&_0x1bc11f[0x0]&&!0x1===_0x1bc11f[0x0]['forceValue']&&(_0x24040c=_0x1e87e5[0x0]['start']['nodeAfter']);const _0xa7ace7=_0x35a112['createRangeIn'](_0x24040c);if('$graveyard'==_0xa7ace7['root']['rootName'])return;const _0x21ce85=Array['from'](_0x574011['getRanges']())['map'](_0x512e08=>_0x1a83df['fromRange'](_0x512e08));_0x35a112['setSelection'](_0xa7ace7),_0x2c7e07['commands']['get'](_0x1eb964)['refresh'](),_0x1bc11f['push']({'forceDefaultExecution':!0x0}),_0x2c7e07['execute'](_0x1eb964,..._0x1bc11f);const _0x4460fd=_0x21ce85['filter'](_0x214158=>'$graveyard'!=_0x214158['root']['rootName']);_0x4460fd['length']>0x0&&_0x35a112['setSelection'](_0x4460fd);for(const _0x34da62 of _0x21ce85)_0x34da62['detach']();});}function _0x388f19(_0x17aad0){const _0x1a2cfc=Array['from'](_0x574011['getRanges']())['map'](_0x4958de=>_0x1a83df['fromRange'](_0x4958de));_0x2c7e07['model']['change'](_0xd67cba=>{const _0x4fec21=_0xd67cba['batch'];_0x17aad0=_0x17aad0['filter'](_0x15395e=>'$graveyard'!=_0x15395e['root']['rootName']),_0xd67cba['setSelection'](_0x17aad0),_0x2c7e07['commands']['get']('removeTableRow')['refresh'](),_0x2c7e07['execute']('removeTableRow',{'forceDefaultExecution':!0x0}),_0x2c7e07['model']['enqueueChange'](()=>{_0x2c7e07['model']['enqueueChange'](_0x4fec21,_0x242ba3=>{const _0x3a6477=_0x1a2cfc['filter'](_0x10dd19=>'$graveyard'!=_0x10dd19['root']['rootName']);_0x3a6477['length']>0x0&&_0x242ba3['setSelection'](_0x3a6477);for(const _0x417cd2 of _0x1a2cfc)_0x417cd2['detach']();});});});}function _0x37e1f5(_0x530218){_0x2c7e07['model']['change'](_0x3b4457=>{const _0x21eba1=Array['from'](_0x574011['getRanges']())['map'](_0x533efd=>_0x1a83df['fromRange'](_0x533efd)),_0x363e31=[];for(const _0x1a88f4 of _0x530218)for(const _0x206739 of _0x1a88f4['getItems']({'shallow':!0x0}))_0x363e31['push'](_0x206739);for(const _0x22a3ae of _0x363e31)'$graveyard'!=_0x22a3ae['root']['rootName']&&(_0x3b4457['setSelection'](_0x3b4457['createPositionAt'](_0x22a3ae,0x0)),_0x2c7e07['commands']['get']('removeTableColumn')['refresh'](),_0x2c7e07['execute']('removeTableColumn',{'forceDefaultExecution':!0x0}));const _0x3cc3bf=_0x21eba1['filter'](_0x447ba5=>'$graveyard'!=_0x447ba5['root']['rootName']);_0x3cc3bf['length']>0x0&&_0x3b4457['setSelection'](_0x3cc3bf);for(const _0x228d3d of _0x21eba1)_0x228d3d['detach']();});}function _0x142aa7(_0x41268c,_0x1de322){return _0x1de322['every'](_0x50f9bd=>_0x41268c['some'](_0x87d018=>_0x87d018['end']['isEqual'](_0x50f9bd['start'])||_0x50f9bd['end']['isEqual'](_0x87d018['start'])));}function _0x3683af(_0x56645e,_0x321361){return _0x56645e['some'](_0x16b42c=>_0x321361['some'](_0x50f70c=>_0x16b42c['end']['isTouching'](_0x50f70c['start'])));}_0x44960d['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','discard',_0x388f19),_0x44960d['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','accept',_0x388f19),_0x44960d['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','discard',_0x37e1f5),_0x44960d['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','accept',_0x37e1f5),_0x44960d['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','join',_0x142aa7),_0x44960d['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','join',_0x142aa7),_0x44960d['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','join',_0x3683af),_0x44960d['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','join',_0x3683af),_0x44960d['enableCommand']('mergeTableCells',()=>{const _0x405da9=_0x7a4a82(_0x2c7e07['model']['document']['selection']);_0x2c7e07['model']['change'](()=>{_0x44960d['markMultiRangeBlockFormat'](_0x405da9,{'commandName':'mergeTableCells','commandParams':[]},[],'mergeTableCells');});}),_0x44960d['_descriptionFactory']['registerDescriptionCallback'](_0x379fa1=>{const {data:_0x2a6651}=_0x379fa1;if(_0x2a6651)return'mergeTableCells'==_0x2a6651['commandName']?{'type':'format','content':t('*Merge\x20cells*')}:void 0x0;});let _0x4ecaa7=!0x1;_0x44960d['_suggestionFactory']['registerCustomCallback']('formatBlock','mergeTableCells','accept',_0xb51669=>{_0x2c7e07['model']['change'](_0x8fff97=>{const _0x369925=Array['from'](_0x574011['getRanges']())['map'](_0x3c7ec7=>_0x1a83df['fromRange'](_0x3c7ec7));_0x8fff97['setSelection'](_0xb51669),_0x4ecaa7=!0x0,_0x2c7e07['commands']['get']('mergeTableCells')['refresh'](),_0x2c7e07['execute']('mergeTableCells',{'forceDefaultExecution':!0x0}),_0x4ecaa7=!0x1;const _0x2391a4=_0x369925['filter'](_0x3e29e4=>'$graveyard'!=_0x3e29e4['root']['rootName']);_0x2391a4['length']>0x0&&_0x8fff97['setSelection'](_0x2391a4);for(const _0x45d4f3 of _0x369925)_0x45d4f3['detach']();});}),_0x2c7e07['commands']['get']('mergeTableCells')['on']('set:isEnabled',(_0x586739,_0x214fce,_0x551251)=>{if(!_0x4ecaa7&&_0x551251){const _0x1ffba6=_0x7a4a82(_0x2c7e07['model']['document']['selection']);for(const _0xba0a24 of _0x1ffba6)for(const _0x134568 of _0x1ffba6)_0xba0a24!=_0x134568&&(this['_areMergableCells'](_0xba0a24,_0x134568)||(_0x586739['return']=!0x1,_0x586739['stop']()));}});}['_getCoordsForCells'](_0x490a15){const _0x1c7c81=this['editor']['plugins']['get']('TableUtils');let _0x4676ff=Number['MAX_SAFE_INTEGER'],_0x5efbce=Number['MIN_SAFE_INTEGER'],_0x5bc4ed=Number['MAX_SAFE_INTEGER'],_0x4d96b1=Number['MIN_SAFE_INTEGER'];for(const _0x1eb5b4 of _0x490a15){const {row:_0x5156e0,column:_0x2f7c05}=_0x1c7c81['getCellLocation'](_0x1eb5b4),_0x2d95ce=_0x1eb5b4['hasAttribute']('rowspan')?_0x1eb5b4['getAttribute']('rowspan')-0x1:0x0,_0x1b4d94=_0x1eb5b4['hasAttribute']('colspan')?_0x1eb5b4['getAttribute']('colspan')-0x1:0x0;_0x4676ff=_0x5156e0<_0x4676ff?_0x5156e0:_0x4676ff,_0x5efbce=_0x5156e0+_0x2d95ce>_0x5efbce?_0x5156e0+_0x2d95ce:_0x5efbce,_0x5bc4ed=_0x2f7c05<_0x5bc4ed?_0x2f7c05:_0x5bc4ed,_0x4d96b1=_0x2f7c05+_0x1b4d94>_0x4d96b1?_0x2f7c05+_0x1b4d94:_0x4d96b1;}return{'minRow':_0x4676ff,'maxRow':_0x5efbce,'minColumn':_0x5bc4ed,'maxColumn':_0x4d96b1};}['_getSuggestionCoords'](_0x56e094){return this['_getCoordsForCells'](_0x56e094['getRanges']()['map'](_0x19ce2b=>_0x19ce2b['start']['nodeAfter']));}['_areMergableCells'](_0x4f2468,_0x46f2a7){const _0x570318=this['editor']['plugins']['get']('TrackChangesEditing'),_0x18c879=this['editor']['model']['createRangeOn'](_0x4f2468),_0x49dc0d=this['editor']['model']['createRangeOn'](_0x46f2a7),_0x52a729=new Set(),_0x33a97f=new Set();for(const _0x290cd1 of _0x570318['getSuggestions']())if(('insertion'==_0x290cd1['type']||'deletion'==_0x290cd1['type']||'mergeTableCells'==_0x290cd1['subType'])&&_0x290cd1['isInContent'])for(const _0x2da40d of _0x290cd1['getRanges']())_0x2da40d['containsRange'](_0x18c879,!0x0)&&_0x52a729['add'](_0x290cd1['type']+':'+_0x290cd1['author']['id']),_0x2da40d['containsRange'](_0x49dc0d,!0x0)&&_0x33a97f['add'](_0x290cd1['type']+':'+_0x290cd1['author']['id']);if(_0x52a729['size']!=_0x33a97f['size'])return!0x1;for(const _0x392338 of _0x52a729)if(!_0x33a97f['has'](_0x392338))return!0x1;return!0x0;}}function se(_0x59511c,_0x5df8f3){let _0x4c7800=_0x5df8f3['parent'];for(;_0x4c7800;){if(_0x4c7800['name']===_0x59511c)return _0x4c7800;_0x4c7800=_0x4c7800['parent'];}}