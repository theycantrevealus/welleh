/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x52f17c from'@ckeditor/ckeditor5-core/src/plugin';import{getRangesWithAttribute as Rt}from'./utils';export default class K extends _0x52f17c{['afterInit'](){const _0x4c76c0=this['editor'];if(!_0x4c76c0['plugins']['has']('HighlightEditing'))return;const _0x199c36=_0x4c76c0['plugins']['get']('TrackChangesEditing');_0x199c36['enableCommand']('highlight',(_0x1b296e,_0x1cc11a={})=>{const _0x4a9600=_0x4c76c0['model']['document']['selection'],_0x3a906f=_0x4a9600['getAttribute']('highlight');let _0x8c10ff=_0x1cc11a['value'],_0x11789d=[];if(_0x4a9600['isCollapsed']){const _0x4e381e=_0x4a9600['getFirstPosition']();if(!_0x4a9600['hasAttribute']('highlight'))return void _0x1b296e(_0x1cc11a);{const _0x5712e0=_0x12b3de=>_0x12b3de['item']['getAttribute']('highlight')===_0x3a906f,_0x5aa98f=_0x4e381e['getLastMatchingPosition'](_0x5712e0,{'direction':'backward'}),_0x3df61b=_0x4e381e['getLastMatchingPosition'](_0x5712e0);_0x11789d=[_0x4c76c0['model']['createRange'](_0x5aa98f,_0x3df61b)],_0x8c10ff==_0x3a906f&&(_0x8c10ff=null);}}else for(const _0x2a1e5d of _0x4a9600['getRanges']())_0x8c10ff?_0x11789d['push'](_0x2a1e5d):_0x11789d['push'](...Rt('highlight',_0x2a1e5d,_0x4c76c0['model']));_0x4c76c0['model']['change'](()=>{for(const _0xf4d851 of _0x11789d)_0x199c36['markInlineFormat'](_0xf4d851,{'commandName':'highlight','commandParams':[{'value':_0x8c10ff}]});});});const {t:t}=_0x4c76c0['locale'];_0x199c36['_descriptionFactory']['registerDescriptionCallback'](_0x59590b=>{const {type:_0x2059f9,data:_0x176892}=_0x59590b;if('formatInline'==_0x2059f9&&'highlight'==_0x176892['commandName']){const _0x4749b9=_0x176892['commandParams'][0x0]['value'];if(_0x4749b9){const _0x3fe166=_0x4c76c0['config']['get']('highlight.options')['find'](_0x5b14f9=>_0x5b14f9['model']==_0x4749b9)['title'],_0x28534b=_0x4c76c0['locale']['_t'](_0x3fe166)['toLowerCase']();return{'type':'format','content':t('*Format:*\x20%0',t({'string':'%0\x20highlight','id':'FORMAT_CUSTOM_HIGHLIGHT'},_0x28534b))};}return{'type':'format','content':t('*Remove\x20format:*\x20%0',t({'string':'highlight','id':'FORMAT_HIGHLIGHT'}))};}});}}